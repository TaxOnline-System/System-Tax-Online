<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>TaxOnline - ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡πÅ‡∏°‡πà‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå (‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)</title>

<!-- TailwindCSS -->
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- Firebase v8 -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<style>
  body {background: linear-gradient(-45deg, #e0c3fc, #8ec5fc, #fbc2eb, #a1c4fd); background-size: 400% 400%; animation: gradientBG 15s ease infinite;}
  @keyframes gradientBG {0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
  .fade-in { animation: fadeIn 0.7s ease-in;}
  @keyframes fadeIn {0%{opacity:0; transform:translateY(10px);} 100%{opacity:1; transform:translateY(0);}}
  #splash {position: fixed; inset:0; background:#fff; z-index:9999; display:flex; flex-direction:column; align-items:center; justify-content:center; opacity:1; transition:opacity 0.8s ease;}
  .splash-spinner {width:60px;height:60px;border:8px solid transparent;border-top-color:#ec4899;border-radius:50%; animation: spin 1.4s linear infinite;}
  @keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
</style>
</head>
<body class="font-sans">

<!-- Splash -->
<div id="splash">
  <div class="splash-spinner"></div>
  <h2 class="text-xl font-semibold text-pink-600 mt-4">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏∞‡∏ö‡∏ö...</h2>
</div>

<!-- Header -->
<header class="bg-white dark:bg-gray-900 shadow p-4 fixed w-full z-30 top-0">
  <div class="max-w-6xl mx-auto flex flex-col sm:flex-row justify-between items-center">
    <div class="flex items-center gap-3 mb-2 sm:mb-0">
      <h1 class="text-2xl font-bold text-pink-600 dark:text-yellow-300">TaxOnline</h1>
      <span id="userGreeting" class="text-sm text-gray-600 dark:text-gray-300 hidden">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, ‚Ä¶</span>
    </div>
    <nav class="text-center sm:text-right">
      <button class="nav-link text-pink-600 dark:text-yellow-400 hover:underline font-semibold" data-nav="welcome">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
      <button class="nav-link text-gray-700 dark:text-gray-200 hover:underline" data-nav="calculator">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ</button>
      <button class="nav-link text-gray-700 dark:text-gray-200 hover:underline" data-nav="history">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</button>
      <button class="nav-link text-gray-700 dark:text-gray-200 hover:underline" data-nav="profile">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</button>
      <button id="loginNav" class="nav-link text-blue-600 dark:text-yellow-400 hover:underline font-semibold" data-nav="auth">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
      <button id="logoutBtn" class="nav-link text-red-600 hover:underline hidden">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
    </nav>
  </div>
</header>

<!-- DateTime + Dark Mode -->
<div class="fixed top-20 sm:top-4 left-4 z-50 bg-white dark:bg-gray-800 text-sm text-gray-700 dark:text-white px-3 py-1 rounded shadow">
  <span id="datetime">--:--</span>
</div>
<div class="fixed top-20 sm:top-4 right-4 z-50">
  <button id="darkToggle" class="bg-white dark:bg-gray-700 text-gray-700 dark:text-white px-4 py-2 rounded shadow text-sm font-medium">üåô Toggle Dark Mode</button>
</div>

<!-- Main Content -->
<div class="pt-28 pb-16">
  <!-- Welcome -->
  <section id="welcomeSection" class="fade-in text-center px-6">
    <h2 class="text-3xl sm:text-4xl font-bold text-pink-700 dark:text-yellow-300 mb-4">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡∏á‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 1 ‡∏ô‡∏≤‡∏ó‡∏µ!</h2>
    <p class="text-gray-700 dark:text-gray-300 text-base sm:text-lg max-w-2xl mx-auto">
      ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡πà‡∏≠‡∏Ñ‡πâ‡∏≤‡πÅ‡∏°‡πà‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ü‡∏£‡∏µ ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢
    </p>
    <div class="mt-6 flex items-center justify-center gap-3 flex-wrap">
      <button class="bg-pink-500 hover:bg-pink-600 text-white px-6 py-3 rounded-full text-lg shadow transition" data-nav="calculator">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏•‡∏¢</button>
      <button class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full text-lg shadow transition" data-nav="auth" id="welcomeLoginBtn">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö / ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
    </div>
  </section>

  <!-- Auth Section -->
  <section id="authSection" class="hidden fade-in px-4">
    <!-- ... (‡∏ü‡∏≠‡∏£‡πå‡∏° Login/Signup ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ... -->
  </section>

  <!-- Profile, Calculator, History Section -->
  <!-- ... (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° ‡πÅ‡∏ï‡πà‡πÅ‡∏Å‡πâ logic JS ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á) ... -->

</div>

<footer class="bg-white dark:bg-gray-900 p-4 text-center text-sm text-gray-500 dark:text-gray-400">
  &copy; 2025 ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ ‡∏û‡πà‡∏≠‡∏Ñ‡πâ‡∏≤ ‡πÅ‡∏°‡πà‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ¬∑ ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
</footer>

<script>
  // ================= Firebase Init =================
  const firebaseConfig = {apiKey:"AIzaSyBl-j4STHVQ80VNM6mPl80-55BHk4nEyZk",authDomain:"tax-online-6afdd.firebaseapp.com",projectId:"tax-online-6afdd",storageBucket:"tax-online-6afdd.appspot.com",messagingSenderId:"959276043439",appId:"1:959276043439:web:f358ce055687efea"};
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const auth = firebase.auth();

  // ================= Sections =================
  const sections = {welcome: document.getElementById('welcomeSection'), auth: document.getElementById('authSection'), profile: document.getElementById('profileSection'), calculator: document.getElementById('calculatorSection'), history: document.getElementById('historySection')};
  const userGreeting = document.getElementById('userGreeting');
  const loginNav = document.getElementById('loginNav');
  const logoutBtn = document.getElementById('logoutBtn');

  function showOnly(key){ Object.keys(sections).forEach(k=>sections[k].classList.toggle('hidden', k!==key)); window.scrollTo({top:0,behavior:'smooth'}); }

  document.querySelectorAll('[data-nav]').forEach(btn=>{
    btn.addEventListener('click',()=>{
      const target = btn.getAttribute('data-nav');
      if(['calculator','history','profile'].includes(target) && !auth.currentUser){ alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ'); showOnly('auth'); return; }
      if(target==='history') loadHistory();
      if(target==='profile') loadProfile();
      showOnly(target);
    });
  });

  // Dark Mode
  document.getElementById('darkToggle').addEventListener('click',()=>{
    document.documentElement.classList.toggle('dark');
    localStorage.setItem('theme', document.documentElement.classList.contains('dark')?'dark':'light');
  });
  if(localStorage.getItem('theme')==='dark') document.documentElement.classList.add('dark');

  // DateTime
  function updateDateTime(){ const now=new Date(); const opts={weekday:'long',year:'numeric',month:'long',day:'numeric'}; const el=document.getElementById('datetime'); if(el) el.innerText=`${now.toLocaleDateString('th-TH',opts)} ${now.toLocaleTimeString('th-TH')}`; }
  setInterval(updateDateTime,1000); updateDateTime();

  // Splash
  window.addEventListener('load',()=>{
    setTimeout(()=>{const s=document.getElementById('splash'); s.style.opacity='0'; setTimeout(()=>s.style.display='none',800);},1200);
    showOnly('welcome');
  });

  // ================= Auth =================
  // Login/Signup/Google Sign-in ‡πÅ‡∏•‡∏∞ onAuthStateChanged ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°
  // ================= Profile / Tax / History =================
  // Logic ‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î profile, ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å, ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ, ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏£‡∏≤‡∏ü, ‡πÇ‡∏´‡∏•‡∏î‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥, ‡∏•‡∏ö history
  // ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ code ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÅ‡∏ï‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö user.currentUser ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å action

</script>
</body>
</html>
